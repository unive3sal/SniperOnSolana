# ===========================================
# SOLANA SNIPER BOT CONFIGURATION
# ===========================================
# Copy this file to .env and fill in your values

# --- Network Configuration ---
# Primary gRPC endpoint (Shyft free tier)
# Sign up at: https://shyft.to/get-api-key
GRPC_ENDPOINT=grpc.shyft.to:443
GRPC_TOKEN=your-shyft-api-key-here

# Fallback RPC (Helius free tier)
# Sign up at: https://helius.dev
HELIUS_API_KEY=your-helius-api-key-here

# Optional: Additional RPC endpoints (comma-separated for failover)
# BACKUP_RPC_URLS=https://api.mainnet-beta.solana.com

# RPC Cache TTL in milliseconds
# Higher values = fewer RPC calls but staler data
# Recommended: 2000-5000 for free plans, 1000-2000 for paid plans
RPC_CACHE_TTL_MS=2000

# --- Multi-Provider RPC Configuration ---
# The bot uses multiple RPC providers for load balancing and failover.
# Providers are selected by priority (1=highest). Same priority = round-robin.
# The global rate limit is automatically calculated as SHYFT_RPC_RPS + HELIUS_RPC_RPS

# Shyft API key (optional - defaults to GRPC_TOKEN if not set)
# Useful if you have separate Shyft accounts for gRPC and RPC
# SHYFT_API_KEY=

# Per-provider rate limits
# Free plan ACTUAL limits (not advertised): Helius ~3 RPS, Shyft ~5 RPS
# Set conservatively to avoid 429 errors and internal retry storms
# These are applied independently to each provider for load-balanced requests
SHYFT_RPC_RPS=5
HELIUS_RPC_RPS=3

# Provider priority (1=highest/primary, 2=secondary, 3=backup)
# Set both to same priority for load balancing across providers
# Test latency with: curl -w "%{time_total}s" -o /dev/null -s -X POST <rpc_url>
HELIUS_PRIORITY=1
SHYFT_PRIORITY=1
SOLANA_PRIORITY=3

# RPC polling interval in milliseconds (used when gRPC and WebSocket fail)
# Lower = faster detection but more RPC calls
# Recommended: 1000-3000 for free plans
RPC_POLLING_INTERVAL_MS=2000

# Auto-detect gRPC capability (set false to always use WebSocket)
# When true, the bot probes gRPC on startup to check availability
# Free plans may not include gRPC access, so auto-detection is recommended
ENABLE_GRPC_AUTO_DETECT=true

# Max concurrent transaction fetches
# Lower values reduce 429 errors but slow pool detection
# Recommended: 2-3 for free plans, 5-10 for paid plans
MAX_CONCURRENT_FETCHES=2

# Fetch timeout in milliseconds
# Should be higher than typical RPC response time + rate limit wait
# Recommended: 5000-10000 for free plans
FETCH_TIMEOUT_MS=5000

# --- Wallet Configuration ---
# Base58 encoded private key (KEEP THIS SECRET!)
# Generate with: npm run generate-wallet
PRIVATE_KEY=your-base58-private-key-here

# --- Trading Parameters ---
# Amount of SOL to spend per snipe
BUY_AMOUNT_SOL=0.1

# Maximum slippage tolerance in basis points (500 = 5%)
MAX_SLIPPAGE_BPS=500

# Take profit percentage (100 = 100% gain = 2x)
TAKE_PROFIT_PERCENT=100

# Stop loss percentage (30 = sell if down 30%)
STOP_LOSS_PERCENT=30

# Maximum total position size in SOL
MAX_POSITION_SIZE_SOL=1.0

# Maximum concurrent positions
MAX_CONCURRENT_POSITIONS=5

# --- Jito Configuration ---
# Jito Block Engine URL
JITO_BLOCK_ENGINE_URL=https://mainnet.block-engine.jito.wtf

# Base tip amount in lamports (10000 = 0.00001 SOL)
JITO_TIP_LAMPORTS=10000

# Tip as percentage of expected profit (used in dynamic mode)
JITO_TIP_PERCENT=5

# Maximum tip in lamports
JITO_MAX_TIP_LAMPORTS=100000

# --- Security Thresholds ---
# Minimum liquidity in SOL to consider a pool
MIN_LIQUIDITY_SOL=5

# Maximum percentage held by top holder (reject if higher)
MAX_TOP_HOLDER_PERCENT=20

# Minimum risk score to execute trade (0-100, higher = safer)
RISK_SCORE_THRESHOLD=70

# Enable honeypot simulation check (slower but safer)
ENABLE_HONEYPOT_CHECK=true

# Maximum tax percentage allowed (for honeypot detection)
MAX_TAX_PERCENT=10

# --- Target DEXes ---
# Enable/disable specific DEX monitoring
ENABLE_RAYDIUM=true
ENABLE_PUMPFUN=true
ENABLE_ORCA=false

# --- Logging Configuration ---
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log file path
LOG_FILE=./logs/sniper.log

# Enable console output
LOG_CONSOLE=true

# --- Operational Mode ---
# Dry run mode (log trades but don't execute)
DRY_RUN=false

# Devnet mode (use devnet instead of mainnet)
USE_DEVNET=false

# --- Auto-Sweep Configuration ---
# Enable automatic SOL sweep to cold wallet when balance exceeds threshold
ENABLE_AUTO_SWEEP=false

# Cold wallet address (destination for excess SOL)
# IMPORTANT: Keep this address secure and backed up
# Threshold for sweep trigger is automatically calculated as 2x BUY_AMOUNT_SOL
# Example: If BUY_AMOUNT_SOL=0.1, bot will sweep when balance > 0.2 SOL
# COLD_WALLET_ADDRESS=your-cold-wallet-public-key-here
